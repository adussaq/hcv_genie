!function(){"use strict";var e,t,n,a,o,r,i,l,s=jQuery,d=!1;r=s("#textResults"),i=s("#imageResults"),l=s("#drop"),e=function(){var e=Math.round(19*Math.random()+1);hcvGenie.findBands({image:{type:"pdf",pageNumber:1,url:"./dataExamples/pages/samples1-20_page"+e+".pdf",scale:2.25}}).then(t)},n=function(e){return function(e){var t,n,a;return n=Math.random().toString(12).replace("0.",""),a=Math.random().toString(12).replace("0.",""),t='<input id="'+n+'" type="text" class="form-control" value="'+e.map(function(e){return e.call}).join(", ")+'">',{string:t,form_id:n,genotype_id:a}}(e)},a=function(e){return function(t){var n,a;t.preventDefault(),n=s("#"+e.form_id).val(),n.match(/^[\s,\d]+$/)&&(a=n.split(/,/),hcvGenie.genotype(a).then(function(t){console.log(t),s("#"+e.genotype_id).text(t)}))}},t=function(e){i.empty(),i.append(s(e.canvas).width(i.width())),e.bandLocationPromise.then(function(e){var t,o,i;for(console.log("here",e.lanes),o=s('<table class="table table-hover" style="width:100%">'),o.appendTo(r),o.append(s('<tr><th style="width:10%">Lane Number</th><th style="width:30%">Genotype</th><th style="width:60%">Bands</th></tr>')),t=0;t<e.lanes.length;t+=1)i=n(e.lanes[t].bands),o.append(s("<tr>",{html:"<td>"+(t+1)+'</td><td id="'+i.genotype_id+'">'+e.lanes[t].genotype+"</td><td>"+i.string+"</td></th>"})),s("#"+i.form_id).keyup(a(i));d=!1})},o=function(e){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var n,a=new FileReader;a.onload=function(e){n=e.target.result,hcvGenie.findBands({image:{type:"pdf",pageNumber:1,url:n,scale:2.25}}).then(t)},a.readAsDataURL(e)}else window.alert("The File APIs are not fully supported in this browser.")},function(){var t,n,a=!1;t=s("#demoFile"),n=s("#computerFile"),t.click(function(t){t.preventDefault(),d||(r.empty(),i.empty().text("Grabbing the image from the server, this may take a few seconds."),d=!0,e())}),n.change(function(e){d||(r.empty(),i.empty(),d=!0,console.log(e),o(e.target.files[0]))}),l.on("dragover",function(e){return e.preventDefault(),e.stopPropagation(),a||d||(l.addClass("hover"),a=!0),!1}),l.on("dragleave",function(e){return e.preventDefault(),e.stopPropagation(),l.removeClass("hover"),a=!1,!1}),l.on("drop",function(e){e.preventDefault(),e.stopPropagation(),l.removeClass("hover"),a=!1,d||(r.empty(),i.empty(),d=!0,o(e.originalEvent.dataTransfer.files[0]))})}()}();