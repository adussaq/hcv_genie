!function(){"use strict";var e,t,n,a,i,o,r,l=jQuery,d=!1;o=l("#textResults"),r=l("#imageResults"),e=function(){var e=Math.round(19*Math.random()+1);hcvGenie.findBands({image:{type:"pdf",pageNumber:1,url:"./dataExamples/pages/samples1-20_page"+e+".pdf",scale:2.25}}).then(t)},n=function(e){return function(e){var t,n,a;return n=Math.random().toString(12).replace("0.",""),a=Math.random().toString(12).replace("0.",""),t='<input id="'+n+'" type="text" class="form-control" value="'+e.map(function(e){return e.call}).join(", ")+'">',{string:t,form_id:n,genotype_id:a}}(e)},a=function(e){return function(t){var n,a;t.preventDefault(),n=l("#"+e.form_id).val(),n.match(/^[\s,\d]+$/)&&(a=n.split(/,/),hcvGenie.genotype(a).then(function(t){console.log(t),l("#"+e.genotype_id).text(t)}))}},t=function(e){r.empty(),r.append(l(e.canvas).width(r.width())),e.bandLocationPromise.then(function(e){var t,i,r;for(console.log("here",e.lanes),i=l('<table class="table table-hover" style="width:100%">'),i.appendTo(o),i.append(l('<tr><th style="width:10%">Lane Number</th><th style="width:30%">Genotype</th><th style="width:60%">Bands</th></tr>')),t=0;t<e.lanes.length;t+=1)r=n(e.lanes[t].bands),i.append(l("<tr>",{html:"<td>"+(t+1)+'</td><td id="'+r.genotype_id+'">'+e.lanes[t].genotype+"</td><td>"+r.string+"</td></th>"})),l("#"+r.form_id).keyup(a(r));d=!1})},i=function(e){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var n,a=new FileReader;a.onload=function(e){n=e.target.result,hcvGenie.findBands({image:{type:"pdf",pageNumber:1,url:n,scale:2.25}}).then(t)},a.readAsDataURL(e)}else window.alert("The File APIs are not fully supported in this browser.")},function(){var t,n;t=l("#demoFile"),n=l("#computerFile"),t.click(function(t){t.preventDefault(),o.empty(),r.empty().text("Grabbing the image from the server, this may take a few seconds."),d||(d=!0,e())}),n.change(function(e){o.empty(),r.empty(),d||(d=!0,console.log(e),i(e.target.files[0]))})}()}();