!function(){"use strict";var t,e,s;return t=function(t){var r,i,d,o,v,g,n,a,h,P,N,u,f,M,c,l,y,H=(5*Math.PI/12,7*Math.PI/12,1*Math.PI/12);if(!t||!t.length||!t[0].length)return{x0:0,y0:0,width:0,height:0,theta:0,HTscore:0,HT_vert:0,HT_horz:0,bool:!1};for(v=t.length,g=t[0].length,d=(v-1)/2,o=(g-1)/2,n={vert:{distPos:[0,0,0],distNeg:[0,0,0]}},a=Math.sqrt(d*d+o*o),h=3*Math.PI/a/10,P=function(t,e,s,r){e>=0&&(n[r].distPos[0]+=t*s,n[r].distPos[1]+=e*s,n[r].distPos[2]+=s),0>=e&&(n[r].distNeg[0]+=t*s,n[r].distNeg[1]+=e*s,n[r].distNeg[2]+=s)},r=0;v>r;r+=1)for(i=0;g>i;i+=1)if(t[r]&&t[r][i]&&t[r][i].strength&&90===t[r][i].direction)for(N=-H;H>N;N+=h)u=(r-d)*Math.cos(N)+(i-o)*Math.sin(N),P(N,u,t[r][i].strength,"vert");return n=s(n,v,g),f=Math.round(e*((n.vert.distPos[0]+n.vert.distNeg[0])/(n.vert.distPos[2]+n.vert.distNeg[2])))/e,M=g/2,c=Math.round(e*(d+n.vert.distPos[1]/n.vert.distPos[2]+n.vert.distNeg[1]/n.vert.distNeg[2]))/e,l=g,y=Math.round(e*(n.vert.distPos[1]/n.vert.distPos[2]-n.vert.distNeg[1]/n.vert.distNeg[2]))/e,{x0:c,y0:M,width:y,height:l,theta:f,HTscore:n.vert.distPos[2]+n.vert.distNeg[2],bool:!0}},s=function(t,e){var s;return s=JSON.parse(JSON.stringify(t)),0===s.vert.distPos[2]?0===s.vert.distNeg[2]?(t.vert.distPos[1]=e/2,t.vert.distNeg[1]=-e/2,s.vert.distPos[2]=1e-4,s.vert.distNeg[2]=1e-4):(s.vert.distNeg[2]/=100,s.vert.distPos[2]=s.vert.distNeg[2],s.vert.distNeg[1]=-e/4+s.vert.distNeg[1]/2,t.vert.distPos[1]=s.vert.distNeg[1]):0===s.vert.distNeg[2]&&(s.vert.distPos[2]/=100,s.vert.distNeg[2]=s.vert.distPos[2],s.vert.distPos[1]=-e/4+s.vert.distPos[1]/2,t.vert.distNeg[1]=s.vert.distPos[1]),t},self.onmessage=function(s){var r;e=s.data.roundDigit,r=t(s.data.array),self.postMessage(r)},!1}();