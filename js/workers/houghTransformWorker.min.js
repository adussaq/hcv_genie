!function(){"use strict";var t,s,r;return t=function(t){var e,i,o,d,h,g,P,N,v,z,n,a,c,f,u,M,l,H=5*Math.PI/12,T=7*Math.PI/12,I=1*Math.PI/12;if(!t||!t.length||!t[0].length)return{x0:0,y0:0,width:0,height:0,theta:0,HTscore:0,HT_vert:0,HT_horz:0,bool:!1};for(h=t.length,g=t[0].length,o=(h-1)/2,d=(g-1)/2,P={vert:{distPos:[0,0,0],distNeg:[0,0,0]},horz:{distPos:[0,0,0],distNeg:[0,0,0]}},N=Math.sqrt(o*o+d*d),v=3*Math.PI/N/10,z=function(t,s,r,e){s>=0&&(P[e].distPos[0]+=t*r,P[e].distPos[1]+=s*r,P[e].distPos[2]+=r),0>=s&&(P[e].distNeg[0]+=t*r,P[e].distNeg[1]+=s*r,P[e].distNeg[2]+=r)},e=0;h>e;e+=1)for(i=0;g>i;i+=1)if(t[e]&&t[e][i]&&t[e][i].strength){if(0===t[e][i].direction||45===t[e][i].direction||135===t[e][i].direction)for(n=H;T>n;n+=v)a=(e-o)*Math.cos(n)+(i-d)*Math.sin(n),z(n,a,t[e][i].strength,"horz");if(90===t[e][i].direction||45===t[e][i].direction||135===t[e][i].direction)for(n=-I;I>n;n+=v)a=(e-o)*Math.cos(n)+(i-d)*Math.sin(n),z(n,a,t[e][i].strength,"vert")}return P=r(P,h,g),c=Math.round(s*((P.vert.distPos[0]+P.vert.distNeg[0]-Math.PI/2*(P.horz.distPos[2]+P.horz.distNeg[2])+P.horz.distPos[0]+P.horz.distNeg[0])/(P.vert.distPos[2]+P.vert.distNeg[2]+P.horz.distPos[2]+P.horz.distNeg[2])))/s,f=Math.round(s*(d+P.horz.distPos[1]/P.horz.distPos[2]+P.horz.distNeg[1]/P.horz.distNeg[2]))/s,u=Math.round(s*(o+P.vert.distPos[1]/P.vert.distPos[2]+P.vert.distNeg[1]/P.vert.distNeg[2]))/s,M=Math.round(s*(P.horz.distPos[1]/P.horz.distPos[2]-P.horz.distNeg[1]/P.horz.distNeg[2]))/s,l=Math.round(s*(P.vert.distPos[1]/P.vert.distPos[2]-P.vert.distNeg[1]/P.vert.distNeg[2]))/s,{x0:u,y0:f,width:l,height:M,theta:c,HTscore:P.vert.distPos[2]+P.vert.distNeg[2]+P.horz.distPos[2]+P.horz.distNeg[2],HT_vert:[P.vert.distPos[2],P.vert.distNeg[2]],HT_horz:[P.horz.distPos[2],P.horz.distNeg[2]],bool:!0}},r=function(t,s,r){var e;return e=JSON.parse(JSON.stringify(t)),0===e.vert.distPos[2]?0===e.vert.distNeg[2]?(t.vert.distPos[1]=s/2,t.vert.distNeg[1]=-s/2,e.vert.distPos[2]=1e-4,e.vert.distNeg[2]=1e-4):(e.vert.distNeg[2]/=100,e.vert.distPos[2]=e.vert.distNeg[2],e.vert.distNeg[1]=-s/4+e.vert.distNeg[1]/2,t.vert.distPos[1]=e.vert.distNeg[1]):0===e.vert.distNeg[2]&&(e.vert.distPos[2]/=100,e.vert.distNeg[2]=e.vert.distPos[2],e.vert.distPos[1]=-s/4+e.vert.distPos[1]/2,t.vert.distNeg[1]=e.vert.distPos[1]),0===e.horz.distPos[2]?0===e.horz.distNeg[2]?(t.horz.distPos[1]=r/2,t.horz.distNeg[1]=-r/2,e.horz.distPos[2]=1e-4,e.horz.distNeg[2]=1e-4):(e.horz.distNeg[2]/=100,e.horz.distPos[2]=e.horz.distNeg[2],e.horz.distNeg[1]=-r/4+e.horz.distNeg[1]/2,t.horz.distPos[1]=e.horz.distNeg[1]):0===e.horz.distNeg[2]&&(e.horz.distPos[2]/=100,e.horz.distNeg[2]=e.horz.distPos[2],e.horz.distPos[1]=-r/4+e.horz.distPos[1]/2,t.horz.distNeg[1]=e.horz.distPos[1]),e},self.onmessage=function(r){var e;s=r.data.roundDigit,e=t(r.data.array),self.postMessage(e)},!1}();