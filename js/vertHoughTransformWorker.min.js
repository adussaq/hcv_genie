!function(){"use strict";var t,s,e;return t=function(t){var r,i,d,v,o,g,n,P,a,N,h,u,f,M,c,l,I,y=(5*Math.PI/12,7*Math.PI/12,1*Math.PI/12);for(o=t.length,g=t[0].length,d=(o-1)/2,v=(g-1)/2,n={vert:{distPos:[0,0,0],distNeg:[0,0,0]}},P=Math.sqrt(d*d+v*v),a=3*Math.PI/P/10,N=function(t,s,e,r){s>=0&&(n[r].distPos[0]+=t*e,n[r].distPos[1]+=s*e,n[r].distPos[2]+=e),0>=s&&(n[r].distNeg[0]+=t*e,n[r].distNeg[1]+=s*e,n[r].distNeg[2]+=e)},r=0;o>r;r+=1)for(i=0;g>i;i+=1)if(t[r]&&t[r][i]&&t[r][i].strength&&90===t[r][i].direction)for(h=-y;y>h;h+=a)u=(r-d)*Math.cos(h)+(i-v)*Math.sin(h),N(h,u,t[r][i].strength,"vert");return n=e(n,o,g),f=Math.round(s*((n.vert.distPos[0]+n.vert.distNeg[0])/(n.vert.distPos[2]+n.vert.distNeg[2])))/s,M=g/2,c=Math.round(s*(d+n.vert.distPos[1]/n.vert.distPos[2]+n.vert.distNeg[1]/n.vert.distNeg[2]))/s,l=g,I=Math.round(s*(n.vert.distPos[1]/n.vert.distPos[2]-n.vert.distNeg[1]/n.vert.distNeg[2]))/s,{x0:c,y0:M,width:I,height:l,theta:f,HTscore:n.vert.distPos[2]+n.vert.distNeg[2]}},e=function(t,s){var e;return e=JSON.parse(JSON.stringify(t)),0===e.vert.distPos[2]?0===e.vert.distNeg[2]?(t.vert.distPos[1]=s/2,t.vert.distNeg[1]=-s/2,e.vert.distPos[2]=1e-4,e.vert.distNeg[2]=1e-4):(e.vert.distNeg[2]/=100,e.vert.distPos[2]=e.vert.distNeg[2],e.vert.distNeg[1]=-s/4+e.vert.distNeg[1]/2,t.vert.distPos[1]=e.vert.distNeg[1]):0===e.vert.distNeg[2]&&(e.vert.distPos[2]/=100,e.vert.distNeg[2]=e.vert.distPos[2],e.vert.distPos[1]=-s/4+e.vert.distPos[1]/2,t.vert.distNeg[1]=e.vert.distPos[1]),t},self.onmessage=function(e){var r;s=e.data.roundDigit,r=t(e.data.array),self.postMessage(r)},!1}();